<script>
async function loadWarns() {
    const container = document.getElementById('warns-container')
    
    try {
        container.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö...</div>'
        
        const response = await fetch('/api/warns')
        const result = await response.json()
        
        if (!response.ok) {
            throw new Error(`API Error: ${JSON.stringify(result)}`)
        }

        container.innerHTML = ''

        if (!result || result.length === 0) {
            container.innerHTML = '<div class="warn-item">‚úÖ –í —Ç–∞–±–ª–∏—Ü–µ –Ω–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π</div>'
            return
        }

        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ Supabase
        result.forEach(warn => {
            const warnElement = document.createElement('div')
            warnElement.className = 'warn-item'
            
            const date = new Date(warn.created_at).toLocaleDateString('ru-RU')
            
            warnElement.innerHTML = `
                <strong>üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</strong> ${warn.user_id}<br>
                <strong>üìù –ü—Ä–∏—á–∏–Ω–∞:</strong> ${warn.reason || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}<br>
                <strong>üìÖ –î–∞—Ç–∞:</strong> ${date}
                <small style="color: #666; display: block; margin-top: 5px;">ID: ${warn.id}</small>
            `
            
            container.appendChild(warnElement)
        })

    } catch (error) {
        console.error('Frontend Error:', error)
        container.innerHTML = `
            <div class="error">
                ‚ùå –û—à–∏–±–∫–∞: ${error.message}
                <br><br>
                <button onclick="location.reload()">–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</button>
            </div>
        `
    }
}

document.addEventListener('DOMContentLoaded', loadWarns)
</script>
